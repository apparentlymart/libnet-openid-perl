<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Draft: OpenID Attribute Exchange 1.0 -Draft 1</title>
<meta http-equiv="Expires" content="Thu, 10 Aug 2006 23:15:04 +0000">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="OpenID Attribute Exchange 1.0">
<meta name="generator" content="xml2rfc v1.30 (http://xml.resource.org/)">
<style type='text/css'>
<!--
    body {
        font-family: verdana, charcoal, helvetica, arial, sans-serif;
        margin: 2em;
        font-size: small ; color: #000000 ; background-color: #ffffff ; }
    .title { color: #990000; font-size: x-large ;
        font-weight: bold; text-align: right;
        font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
        background-color: transparent; }
    .filename { color: #666666; font-size: 18px; line-height: 28px;
        font-weight: bold; text-align: right;
        font-family: helvetica, arial, sans-serif;
        background-color: transparent; }
    td.rfcbug { background-color: #000000 ; width: 30px ; height: 30px ;
        text-align: justify; vertical-align: middle ; padding-top: 2px ; }
    td.rfcbug span.RFC { color: #666666; font-weight: bold; text-decoration: none;
        background-color: #000000 ;
        font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
        font-size: x-small ; }
    td.rfcbug span.hotText { color: #ffffff; font-weight: normal; text-decoration: none;
        text-align: center ;
        font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
        font-size: x-small ; background-color: #000000; }
    /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
    div#counter{margin-top: 100px}

    a.info{
        position:relative; /*this is the key*/
        z-index:24;
        text-decoration:none}

    a.info:hover{z-index:25; background-color:#990000 ; color: #ffffff ;}

    a.info span{display: none}

    a.info:hover span.info{ /*the span will display just on :hover state*/
        display:block;
        position:absolute;
        font-size: smaller ;
        top:2em; left:2em; width:15em;
        padding: 2px ;
        border:1px solid #333333;
        background-color:#eeeeee; color:#990000;
        text-align: left ;}

     A { font-weight: bold; }
     A:link { color: #990000; background-color: transparent ; }
     A:visited { color: #333333; background-color: transparent ; }
     A:active { color: #333333; background-color: transparent ; }

    p { margin-left: 2em; margin-right: 2em; }
    p.copyright { font-size: x-small ; }
    p.toc { font-size: small ; font-weight: bold ; margin-left: 3em ;}
    table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
    td.toc { font-size: small; font-weight: bold; vertical-align: text-top; }

    span.emph { font-style: italic; }
    span.strong { font-weight: bold; }
    span.verb, span.vbare { font-family: "Courier New", Courier, monospace ; }

    span.vemph { font-style: italic; font-family: "Courier New", Courier, monospace ; }
    span.vstrong { font-weight: bold; font-family: "Courier New", Courier, monospace ; }
    span.vdeluxe { font-weight: bold; font-style: italic; font-family: "Courier New", Courier, monospace ; }

    ol.text { margin-left: 2em; margin-right: 2em; }
    ul.text { margin-left: 2em; margin-right: 2em; }
    li { margin-left: 3em;  }

    pre { margin-left: 3em; color: #333333;  background-color: transparent;
        font-family: "Courier New", Courier, monospace ; font-size: small ;
        text-align: left;
        }

    h3 { color: #333333; font-size: medium ;
        font-family: helvetica, arial, sans-serif ;
        background-color: transparent; }
    h4 { font-size: small; font-family: helvetica, arial, sans-serif ; }

    table.bug { width: 30px ; height: 15px ; }
    td.bug { color: #ffffff ; background-color: #990000 ;
        text-align: center ; width: 30px ; height: 15px ;
         }
    td.bug A.link2 { color: #ffffff ; font-weight: bold;
        text-decoration: none;
        font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
        font-size: x-small ; background-color: transparent }

    td.header { color: #ffffff; font-size: x-small ;
        font-family: arial, helvetica, sans-serif; vertical-align: top;
        background-color: #666666 ; width: 33% ; }
    td.author { font-weight: bold; margin-left: 4em; font-size: x-small ; }
    td.author-text { font-size: x-small; }
    table.full { vertical-align: top ; border-collapse: collapse ;
        border-style: solid solid solid solid ;
        border-color: black black black black ;
        font-size: small ; text-align: center ; }
    table.headers, table.none { vertical-align: top ; border-collapse: collapse ;
        border-style: none;
        font-size: small ; text-align: center ; }
    table.full th { font-weight: bold ;
        border-style: solid ;
        border-color: black black black black ; }
    table.headers th { font-weight: bold ;
        border-style: none none solid none;
        border-color: black black black black ; }
    table.none th { font-weight: bold ;
        border-style: none; }
    table.full td {
        border-style: solid solid solid solid ;
        border-color: #333333 #333333 #333333 #333333 ; }
    table.headers td, table.none td { border-style: none; }

    hr { height: 1px }
-->
</style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="bug" align="right"><tr><td class="bug"><a href="#toc" class="link2">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Draft</td><td class="header">D. Hardt</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">B. Ferg</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Sxip Identity</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">August 10, 2006</td></tr>
</table></td></tr></table>
<div align="right"><span class="title"><br />OpenID Attribute Exchange
1.0 - Draft 1</span></div>

<h3>Abstract</h3>

<p>
	OpenID Attribute Exchange is an OpenID service for exchanging
	identity information between endpoints.  Messages for
	retrieval and storage of identity information are provided.
      
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Terminology<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">1.1.</a>&nbsp;
Definitions and Conventions<br />
<a href="#anchor3">2.</a>&nbsp;
Overview<br />
<a href="#anchor4">3.</a>&nbsp;
Discovery<br />
<a href="#fetch">4.</a>&nbsp;
Fetch Message<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">4.1.</a>&nbsp;
Fetch Request Format<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">4.2.</a>&nbsp;
Fetch Response Format<br />
<a href="#store">5.</a>&nbsp;
Store Message<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">5.1.</a>&nbsp;
Store Request Format<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">5.2.</a>&nbsp;
Store Response Format<br />
<a href="#anchor9">6.</a>&nbsp;
Security Considerations<br />
<a href="#rfc.references1">7.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">7.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">7.2.</a>&nbsp;
Non-normative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="bug" align="right"><tr><td class="bug"><a href="#toc" class="link2">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;Terminology</h3>

<p>
	The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL
	NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and
	"OPTIONAL" in this document are to be interpreted as described
	in <a class="info" href="#RFC2119">[RFC2119]<span> (</span><span class="info">Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.
      
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="bug" align="right"><tr><td class="bug"><a href="#toc" class="link2">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.1"></a><h3>1.1.&nbsp;Definitions and Conventions</h3>

<p>
	  [NOTE: Update terminology based on final OpenID 2.0 draft.]
	
</p>
<p>
	  </p>
<blockquote class="text"><dl>
<dt>User:</dt>
<dd>
	      (Or "End User".)  A person with a digital identity who
	      participates in OpenID based identity information
	      exchanges using their client software, typically a web
	      browser.
	    
</dd>
<dt>Identity Data:</dt>
<dd>
	      A property of a digital identity in which the Property
	      Name and Property Value are represented as a name-value
	      pair.
	    
</dd>
<dt>Persona:</dt>
<dd>
	      A user can have multiple personas as part of their
	      identity. For example, a user might have a work persona
	      and a home persona. A persona is a subset of the user's
	      identity data.
	    
</dd>
<dt>Identity Provider:</dt>
<dd>
	      Also called "IdP" or "Server". This is the OpenID
	      Authentication server that a Consumer contacts for
	      cryptographic proof that the End User owns the Claimed
	      Identity.
	    
</dd>
<dt>Consumer:</dt>
<dd>
	      A site that requests identity data from an Identity
	      Provider via the user's client.
	    
</dd>
</dl></blockquote><p>
	
</p>
<p>
	  For the purposes of this document, the extension namespace
	  identifier for the attribute exchange service will be "ax".
	
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="bug" align="right"><tr><td class="bug"><a href="#toc" class="link2">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;Overview</h3>

<p>
	The attribute exchange service is identified by the URI
	"http://openid.net/srv/ax/1.0" [NOTE: subject to change in following drafts].
      
</p>
<p>
	An attribute is a unit of personal identity information that
	is identified by a unique URI.  It may refer to any kind of
	information; see <a class="info" href="#Prop_List">[Prop_List]<span> (</span><span class="info">Hardt, D. and B. Ferg, &ldquo;Attribute Properties for OpenID Attribute Exchange,&rdquo; August&nbsp;2006.</span><span>)</span></a> for some examples.
      
</p>
<p>
	This service defines two additional message types for
	transferring attributes: fetch (see <a class="info" href="#fetch">Section&nbsp;4<span> (</span><span class="info">Fetch Message</span><span>)</span></a>)
	and store (see <a class="info" href="#store">Section&nbsp;5<span> (</span><span class="info">Store Message</span><span>)</span></a>).  Fetch retrieves
	attribute information from an Identity Provider, while store
	saves or updates attribute information on the Identity
	Provider.  Both messages originate from the Consumer site or
	service provider and are passed to the Identity Provider via
	the user agent as per the OpenID protocol specification.
      
</p>
<p>
	The request parameters detailed here SHOULD be sent with
	OpenID Authentication checkid_immediate or checkid_setup
	requests.  [NOTE: This portion of the spec will change
	depending on the final draft of OpenID 2.0.]
      
</p>
<p>
	Error responses are communicated using the standard OpenID
	methods; see <a class="info" href="#OpenID_Auth">[OpenID_Auth]<span> (</span><span class="info">Recordon, D., Hoyt, J., and B. Fitzpatrick, &ldquo;OpenID Authentication 2.0,&rdquo; July&nbsp;2006.</span><span>)</span></a>.
      
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="bug" align="right"><tr><td class="bug"><a href="#toc" class="link2">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;Discovery</h3>

<p>
	Discovery of the attribute exchange service is achieved via
	the mechanism described in <a class="info" href="#OpenID_Auth">[OpenID_Auth]<span> (</span><span class="info">Recordon, D., Hoyt, J., and B. Fitzpatrick, &ldquo;OpenID Authentication 2.0,&rdquo; July&nbsp;2006.</span><span>)</span></a>.  The
	attribute exchange namespace "http://openid.net/srv/ax/1.0" SHOULD be listed as an
	&lt;xrd:Type&gt; child element of the &lt;xrd:Service&gt;
	element in the XRDS discovery document.
      
</p>
<a name="fetch"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="bug" align="right"><tr><td class="bug"><a href="#toc" class="link2">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;Fetch Message</h3>

<p>
	The fetch message is used to retrieve personal identity
	attributes from an Identity Provider.
      
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="bug" align="right"><tr><td class="bug"><a href="#toc" class="link2">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;Fetch Request Format</h3>

<p>
	  All of the following request fields are OPTIONAL, though at
	  least one of "openid.ax.required" or
	  "openid.ax.if_available" MUST be specified in the request.
	  Separate "required" or "if_available" directives must be
	  used for each identifier name referred to.  Any identifier
	  name referred to in a "required" or "if_available" parameter
	  MUST have an associated "openid.ax.fetch.&lt;identifier
	  name&gt;" parameter.
	
</p>
<p>
	  </p>
<blockquote class="text"><dl>
<dt>openid.ax.fetch.&lt;identifier name&gt;</dt>
<dd>
	      Associates an identifier name with the attribute URI
	      which is the value of this parameter.  The name will be
	      used as the lvalue in the fetch response message.
	    
</dd>
<dt>openid.ax.required</dt>
<dd>
	      The value of this parameter is an identifier name
	      corresponding to a URI defined in an
	      "openid.ax.fetch.&lt;identifier name&gt;".  The Identity
	      Provider must provide the identity information specified
	      in this parameter or return an error condition.
	    
</dd>
<dt>openid.ax.if_available</dt>
<dd>
	      The value of this parameter is an identifier name
	      corresponding to a URI defined in an
	      "openid.ax.fetch.&lt;identifier name&gt;".  The Identity
	      Provider may provide the identity information specified
	      in this parameter.  Not including the information in the
	      response does not constitute an error condition.
	    
</dd>
</dl></blockquote><p>
	
</p>
<p>
	    This example requests the required full name information,
	    and the optional favourite dog information.
	  
</p><pre>

openid.ns.ax=http://openid.net/srv/ax/1.0
openid.ax.fetch.fname=http://example.com/schema/fullname
openid.ax.fetch.fav_dog=http://example.com/schema/favourite_dog
openid.ax.required=fname
openid.ax.if_available=fav_dog

</pre>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="bug" align="right"><tr><td class="bug"><a href="#toc" class="link2">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;Fetch Response Format</h3>

<p>
	  The fetch response message supplies the information
	  requested in the fetch request in a format suitable for
	  consumption by a standard HTML form processor.  Each
	  attribute is supplied with the assigned identifier name as
	  the lvalue and the attribute value as the rvalue.
	
</p>
<p>
	    The response to the previous request example, in which the
	    required full name information and the optional favourite
	    dog information are both supplied.
	  
</p><pre>

fname="John Smith"
fav_dog="Spot"

</pre>
<a name="store"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="bug" align="right"><tr><td class="bug"><a href="#toc" class="link2">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;Store Message</h3>

<p>
	The store message is used to store personal identity
	information to the Identity Provider.
      
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="bug" align="right"><tr><td class="bug"><a href="#toc" class="link2">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;Store Request Format</h3>

<p>
	  All of the following request fields are OPTIONAL.  Any
	  identifier name referred to in a "value" parameter MUST have
	  an associated "openid.ax.label.&lt;identifier name&gt;"
	  parameter.
	
</p>
<p>
	  </p>
<blockquote class="text"><dl>
<dt>openid.ax.label.&lt;identifier name&gt;</dt>
<dd>
	      Associates an identifier name with the attribute URI
	      which is the value of this parameter.  The name will be
	      used as a reference in an
	      "openid.ax.value.&lt;identifier name&gt;" parameter.
	    
</dd>
<dt>openid.ax.value.&lt;identifier name&gt;</dt>
<dd>
	      Assigns a value to the identifier with the name assigned
	      by a "label" parameter.
	    
</dd>
</dl></blockquote><p>
	
</p>
<p>
	  
</p><pre>

openid.ns.ax=http://openid.net/srv/ax/1.0
openid.ax.label.fname=http://example.com/schema/fullname
openid.ax.value.fname="Bob Smith"

</pre>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="bug" align="right"><tr><td class="bug"><a href="#toc" class="link2">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2"></a><h3>5.2.&nbsp;Store Response Format</h3>

<p>
	  The store response consists of an empty response message
	  with the 200 HTTP response code as per the OpenID
	  specification <a class="info" href="#OpenID_Auth">[OpenID_Auth]<span> (</span><span class="info">Recordon, D., Hoyt, J., and B. Fitzpatrick, &ldquo;OpenID Authentication 2.0,&rdquo; July&nbsp;2006.</span><span>)</span></a>.
	
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="bug" align="right"><tr><td class="bug"><a href="#toc" class="link2">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;Security Considerations</h3>

<p>
	[NOTE: TBD]
      
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="bug" align="right"><tr><td class="bug"><a href="#toc" class="link2">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="bug" align="right"><tr><td class="bug"><a href="#toc" class="link2">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>7.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="OpenID_Auth">[OpenID_Auth]</a></td>
<td class="author-text">Recordon, D., Hoyt, J., and B. Fitzpatrick, &ldquo;OpenID Authentication 2.0,&rdquo; July&nbsp;2006.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text">Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="bug" align="right"><tr><td class="bug"><a href="#toc" class="link2">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>7.2.&nbsp;Non-normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="Prop_List">[Prop_List]</a></td>
<td class="author-text"><a href="mailto:dick@sxip.com">Hardt, D.</a> and <a href="mailto:barry @sxip.com">B. Ferg</a>, &ldquo;Attribute Properties for OpenID Attribute Exchange,&rdquo; August&nbsp;2006.</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="bug" align="right"><tr><td class="bug"><a href="#toc" class="link2">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Dick Hardt</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Sxip Identity</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">798 Beatty Street</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Vancouver, BC  V6B 2M1</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">CA</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:dick@sxip.com">dick@sxip.com</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://sxip.com/">http://sxip.com/</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Barry Ferg</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Sxip Identity</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">798 Beatty Street</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Vancouver, BC  V6B 2M1</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">CA</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:barry@sxip.com">barry@sxip.com</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://sxip.com/">http://sxip.com/</a></td></tr>
</table>
</body></html>
